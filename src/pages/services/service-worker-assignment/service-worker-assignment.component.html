<div class="content">
  <mat-progress-bar *ngIf="isLoading" mode="indeterminate"></mat-progress-bar>

  <mat-tree
    [dataSource]="dataSource"
    [treeControl]="treeControl"
    class="vscode-tree"
  >
    <mat-tree-node
      *matTreeNodeDef="let node"
      matTreeNodePadding
      class="worker-node"
    >
      <div class="node-content">
        <span>{{ node.name }}</span>
      </div>
    </mat-tree-node>

    <mat-nested-tree-node
      *matTreeNodeDef="let node; when: hasChild"
      class="service-node"
    >
      <div class="node-content">
        <button
          mat-icon-button
          (click)="toggleService(node)"
          class="toggle-btn"
        >
          <mat-icon>
            {{
              treeControl.isExpanded(node)
                ? 'expand_more'
                : 'chevron_right'
            }}
          </mat-icon>
        </button>

        <mat-icon class="folder-icon">folder</mat-icon>
        <span class="service-name">{{ node.name }}</span>

        <span class="spacer"></span>

        <button
          mat-button
          color="primary"
          (click)="openAssignmentModal(node.rawService)"
        >
          Редактировать
        </button>
      </div>

      <div [class.hidden]="!treeControl.isExpanded(node)">
        <ng-container matTreeNodeOutlet></ng-container>
      </div>
    </mat-nested-tree-node>
  </mat-tree>
</div>